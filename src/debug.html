<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug - Shards of the Withering Wilds</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background-color: #1a1a1a;
            color: white;
            font-family: monospace;
        }
        #debug-info {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.8);
            padding: 10px;
            border: 1px solid #444;
            max-width: 300px;
        }
        #game-container {
            border: 2px solid red;
            display: inline-block;
        }
        canvas {
            border: 2px solid yellow;
        }
        .status { margin: 5px 0; }
        .success { color: #0f0; }
        .error { color: #f00; }
        .warning { color: #ff0; }
    </style>
</head>
<body>
    <h1>Phaser Debug Test</h1>
    <div id="debug-info">
        <h3>Debug Status:</h3>
        <div id="status-log"></div>
    </div>
    <div id="game-container"></div>
    
    <script type="module">
        const statusLog = document.getElementById('status-log');
        
        function log(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            statusLog.appendChild(div);
            console.log(`[${type}] ${message}`);
        }
        
        log('Page loaded');
        
        try {
            // Import Phaser
            import('https://cdn.skypack.dev/phaser@3.70.0').then(module => {
                const Phaser = module.default;
                log('Phaser imported successfully', 'success');
                
                // Create a simple test scene
                class TestScene extends Phaser.Scene {
                    constructor() {
                        super({ key: 'TestScene' });
                        log('TestScene constructor called');
                    }
                    
                    preload() {
                        log('TestScene.preload called');
                    }
                    
                    create() {
                        log('TestScene.create called');
                        
                        // Set background
                        this.cameras.main.setBackgroundColor(0x2d2d2d);
                        log('Background color set');
                        
                        // Add visible elements
                        const rect = this.add.rectangle(160, 90, 100, 50, 0x00ff00);
                        log('Rectangle added');
                        
                        const text = this.add.text(160, 90, 'Phaser is Working!', {
                            fontSize: '16px',
                            color: '#ffffff'
                        });
                        text.setOrigin(0.5);
                        log('Text added');
                        
                        // Add interactive element
                        rect.setInteractive();
                        rect.on('pointerdown', () => {
                            log('Rectangle clicked!', 'success');
                            rect.setFillStyle(0xff0000);
                        });
                    }
                    
                    update() {
                        // Called every frame
                    }
                }
                
                // Create game config
                const config = {
                    type: Phaser.AUTO,
                    width: 320,
                    height: 180,
                    parent: 'game-container',
                    backgroundColor: 0x000000,
                    scene: TestScene,
                    physics: {
                        default: 'arcade',
                        arcade: {
                            debug: true
                        }
                    },
                    render: {
                        pixelArt: true
                    },
                    scale: {
                        mode: Phaser.Scale.FIT,
                        autoCenter: Phaser.Scale.CENTER_BOTH,
                        width: 320,
                        height: 180,
                        zoom: 2
                    }
                };
                
                log('Creating Phaser game with config:', 'warning');
                console.log(config);
                
                try {
                    const game = new Phaser.Game(config);
                    log('Game created successfully!', 'success');
                    
                    // Log game details
                    setTimeout(() => {
                        log(`Canvas size: ${game.canvas.width}x${game.canvas.height}`);
                        log(`Renderer: ${game.renderer.type === 1 ? 'Canvas' : 'WebGL'}`);
                        log(`Scenes: ${game.scene.scenes.length}`);
                    }, 100);
                    
                } catch (gameError) {
                    log(`Game creation error: ${gameError.message}`, 'error');
                    console.error(gameError);
                }
                
            }).catch(error => {
                log(`Phaser import error: ${error.message}`, 'error');
                console.error(error);
            });
            
        } catch (error) {
            log(`Script error: ${error.message}`, 'error');
            console.error(error);
        }
    </script>
</body>
</html>